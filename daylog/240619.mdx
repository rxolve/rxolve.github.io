---
title: "ngrok 을 통해 localhost 를 외부에서 호출하기"
date: "240619"
tags: ["ngrok"]
---

- 알림을 받기 위해 외부에서 호출할 API를 작업하는데, 테스트를 위해 개발서버에 빌드하고 배포하는 것이 번거로웠습니다.
- 이름만 들어봤던 ngrok을 사용해보기로 했습니다.

1. ngrok을 설치합니다.

```
 brew install ngrok/ngrok/ngrok
```

2. 회원가입 후 토큰을 등록합니다.

```
ngrok config add-authtoken {your_token}
```

3. 로컬 서버를 공개합니다.

```
ngrok http 3000
```

- 순식간에 외부에서 접속할 수 있는 URL이 생성되었습니다. 심지어 HTTPS도 지원합니다.
- 원리가 궁금해서 지피티에게 물어봤습니다.

  - ngrok은 로컬 서버를 외부에서 접속할 수 있게 해주는 터널링 프로그램입니다.
  - ngrok 클라이언트는 ngrok 서버와 로컬 서버간의 TCP 연결을 설정합니다.
    - 이 연결은 ngrok 서버가 인터넷에 공개할 수 있는 고유한 서브도메인을 할당받습니다.
  - 외부 사용자가 ngrok서버에서 할당한 URL에 접속하면, 트래픽이 ngrok 서버로 전송됩니다.
  - ngrok 서버는 이 트래픽을 ngrok 클라이언트가 설정한 터널을 통해 로컬 서버로 전달합니다.

  ```scss
  [외부 사용자] --(인터넷)--> [ngrok 서버] --(터널)--> [ngrok 클라이언트] --(로컬 네트워크)--> [로컬 서버]
  ```

  - 로컬 서버가 응답을 생성하면, ngrok 클라이언트는 이 응답을 ngrok 서버로 다시 보냅니다.

- 정리하면 ngrok은 터널링 기법을 이용하여 중계 역할을 하며, 로컬 서버와 외부 사용자 간의 통신을 가능하게 합니다.
- 멋진 도구들이 있기에 점점 개발하기 편한 세상이 되어간다는 생각이 듭니다.
- 테스트를 위해 외부서버에 빌드하고 배포하는 번거로움이 사라졌습니다.
