---
title: "AWS RDS 경보 슬랙 알림 받기"
date: "240617"
tags: ["AWS", "CloudWatch", "SNS"]
---

- 어제 서버가 다운되었고, 원인은 RDS의 CPU가 꽉 찼기 때문이었습니다.
- 이런 상황을 미리 알 수 있다면 좋겠다고 생각했습니다.
- AWS CloudWatch 경보를 설정하고, 슬랙으로 알림을 받는 작업을 진행했습니다.

#### SNS에서 알림 전송 설정

1. 사용 중인 api 서버에 엔드포인트를 만들고 거기서 슬랙으로 메시지를 보내는 루틴을 만들었습니다.
2. SNS 에서 주제(Topics)를 선택하고, 주제 생성(Create topic)을 해줍니다.
3. ARN 이름을 짓고 구독 생성(Create subscription) 을 클릭합니다.
4. 프로토콜로 HTTP를 선택하고, 엔드포인트로 1번에서 만들어 놓은 API URL을 입력합니다.

#### CloudWatch 경보 설정

1. CloudWatch 에서 경보 생성(Create Alarm) 버튼을 클릭합니다.
2. 지표 선택(Select metric) 버튼을 클릭합니다.
3. RDS를 선택하고, 모니터링할 DB 인스턴스와 지표를 선택합니다. 저는 전체 데이터베이스 > CPUUtilization 지표를 선택했습니다.
4. 임계값 유형(Threshold type)을 정적(Static)으로 설정하고, 조건을 입력합니다. 저는 보다 크거나 같음(Greater/Equal) > 80 을 입력했습니다.
5. 경보 상태와 알림 작업을 설정합니다. 경보 상태일 때(In alarm)에서 알림 추가(Add notification)를 클릭하고, 새 목록(New list)을 선택합니다.
6. SNS 주제(SNS topic)에서 앞서 생성한 SNS 주제를 선택합니다.

#### 슬랙 메시지 확인

- 이제 알림이 잘 오는지를 확인해야 하는데, 되도록이면 오지 않았으면 좋겠습니다. 😅
