---
title: "Kubelet"
date: "250306"
tags: ["Kubernetes"]
---

## Kubelet

Kubelet은 각 노드(Worker Node) 에서 실행되는 에이전트로, 쿠버네티스 클러스터 내에서 Pod와 그 안의 컨테이너들이 정상적으로 실행되고 있는지를 지속적으로 확인합니다.  
즉, 클러스터의 실제 상태와 원하는 상태를 일치시키기 위한 “감시자” 역할을 수행합니다.

## 주요 역할 및 기능

- Pod 스케줄링 및 실행 관리
  - 컨트롤 플레인(API 서버)에서 전달받은 Pod 정의에 따라 컨테이너를 시작하고, 실행 상태를 주기적으로 체크합니다.
- 헬스 체크 및 상태 보고
  - 각 Pod의 상태(예: 실행 중, 충돌, 재시작 필요 여부 등)를 모니터링하며, 이를 API 서버에 주기적으로 보고합니다.
- 리소스 관리 및 모니터링
  - 노드의 CPU, 메모리, 네트워크 등의 리소스 사용량을 감시하여 클러스터 전체의 건강 상태를 유지합니다.
  - cAdvisor와의 통합을 통해 컨테이너의 성능 지표를 수집합니다.
- 볼륨 마운트 및 네트워크 설정
  - Pod에 정의된 볼륨을 생성하고 마운트하며, 네트워크 설정도 함께 처리하여 동일 노드 내 혹은 다른 노드 간 통신이 원활하도록 지원합니다.

## 컨테이너 런타임과의 상호작용

Kubelet은 직접 컨테이너를 관리하지 않고, 컨테이너 런타임(Container Runtime Interface, CRI) 를 통해 Docker, containerd, CRI-O 등과 같은 런타임과 연동합니다.

- CRI 인터페이스
  - 이를 통해 Kubelet은 컨테이너 시작, 중지, 상태 확인 등의 명령을 컨테이너 런타임에 전달합니다.
  - Docker를 사용했던 과거와 달리, 최신 쿠버네티스 버전에서는 CRI를 준수하는 런타임과의 직접 연동이 권장됩니다.

## Kubelet의 구성 및 통신

- 구성 파일과 플래그
  - Kubelet은 주로 `kubeconfig` 파일을 통해 API 서버와의 통신 설정, 인증 정보, 그리고 TLS 인증서를 관리합니다.
- API 서버와의 주기적 통신
  - 노드의 상태와 Pod의 상태를 주기적으로 API 서버에 전달하여 클러스터의 중앙 제어 플레인이 적시에 상태를 파악하고 필요시 재배치를 수행할 수 있도록 합니다.
- 자체 API 서버 기능
  - 일부 Kubelet은 자체적으로 간단한 API 서버 기능을 제공하여 로컬에서 상태 정보를 조회하거나 디버깅에 활용할 수 있습니다.

## 정리

쿠버네티스 클러스터의 안정성과 확장성을 보장하는 핵심 구성 요소인 Kubelet은 단순한 에이전트를 넘어서, 노드 내에서 컨테이너의 라이프사이클을 관리하고, 시스템 전반의 리소스와 건강 상태를 유지하는 중요한 역할을 담당합니다.
