---
title: "쿠버네티스 API"
date: "250324"
tags: ["Kubernetes"]
---

## 쿠버네티스 API의 역할과 개념

쿠버네티스 클러스터의 API 서버(kube-apiserver) 는 클러스터의 “전철역”과도 같습니다.

- 중앙 관리 포인트: 모든 클러스터 변경 요청(생성, 수정, 삭제 등)은 API 서버를 통해 처리됩니다.
- RESTful 인터페이스: HTTP/JSON 기반의 REST API를 제공하며, 이를 통해 클러스터 상태를 선언적으로 관리할 수 있습니다.
- 데이터 유효성 검사: 들어오는 요청에 대해 인증, 권한 부여, 그리고 유효성 검사를 수행해 클러스터 일관성을 유지합니다.

## 주요 API 컴포넌트 및 아키텍처

쿠버네티스 API를 제대로 이해하려면 관련 컴포넌트의 역할을 함께 살펴볼 필요가 있습니다.

#### kube-apiserver

- 중심 엔진: 클러스터의 모든 API 호출을 받아들이고, etcd와 통신하여 상태를 저장 및 관리합니다.
- 확장성: Custom Resource Definitions(CRD)을 활용해 API를 확장할 수 있습니다.

#### 기타 관련 컴포넌트

- kube-scheduler: 새로 생성된 파드에 적합한 노드를 할당하는 역할을 하며, API 서버에서 받은 요청에 기반해 동작합니다.
- kube-controller-manager: 여러 컨트롤러(예: ReplicaSet, Endpoints 등)를 관리하며, API 객체의 상태를 원하는 상태로 유지합니다.
- kubelet & kube-proxy: 워커 노드에서 실행되며, API 서버와의 통신을 통해 실제 컨테이너 상태 및 네트워킹을 담당합니다.

이처럼 쿠버네티스의 핵심 컴포넌트들은 API를 통해 상호 작용하며 클러스터를 하나의 통합된 시스템으로 운영하게 됩니다.

## API 객체와 리소스 모델

쿠버네티스는 선언적 구성(declarative configuration)을 기반으로 동작합니다.

- 객체 정의: 모든 클러스터 리소스(예: Pod, Service, Deployment 등)는 YAML 또는 JSON 형식으로 정의됩니다.
- Spec과 Status: 각 객체는 ‘spec’ 필드(원하는 상태)와 ‘status’ 필드(현재 상태)를 가지고 있으며, 이를 통해 컨트롤러가 실제 상태를 점검하고 조정합니다.
- 버전 관리: API 리소스는 v1, v1beta1 등의 버전 관리 체계를 따르며, 안정성과 호환성을 보장합니다.

## 확장성과 커스터마이징: CRD와 컨트롤러

- Custom Resource Definitions (CRDs):  
  기존 API 외에도, 사용자가 직접 정의한 리소스 타입을 추가할 수 있습니다.  
  이를 통해 도메인에 특화된 객체를 생성하고, 해당 객체를 다루는 커스텀 컨트롤러를 구축할 수 있습니다.
- 컨트롤러 패턴:  
  컨트롤러는 API 서버의 변경사항을 지속적으로 감시하며, 원하는 상태와 실제 상태 사이의 차이를 메꿔줍니다.

## 보안과 API 접근 제어

API 서버는 클러스터 보안의 관문 역할을 합니다.

- 인증 및 권한 부여:  
  API 호출 시, 사용자나 서비스 계정에 대해 인증을 진행하고, RBAC(Role-Based Access Control)을 통해 권한을 제어합니다.
- 어드미션 컨트롤러:  
  들어오는 요청을 사전 처리해, 보안 정책이나 기타 클러스터 정책을 적용합니다.
