---
title: "Kubernetes Pod"
date: "250310"
tags: ["Kubernetes"]
---

## Pod?

Pod은 쿠버네티스에서 가장 작은 배포 단위로, 하나 이상의 컨테이너를 포함하는 실행 환경입니다.  
Pod 내에 포함된 컨테이너들은 동일한 네트워크 네임스페이스, 스토리지 볼륨, 그리고 설정 정보를 공유하여 서로 긴밀하게 통신할 수 있습니다.

## Pod의 구성 요소

- 컨테이너(Container): Pod 내부에는 주로 애플리케이션 컨테이너가 하나 이상 포함되며, 각각의 컨테이너는 독립적으로 실행되지만, 같은 Pod 내에서 IP 주소와 포트를 공유합니다.
- 공유 네트워크: 모든 컨테이너는 단일 IP 주소를 가지며, localhost를 통해 서로 통신할 수 있습니다.
- 스토리지 볼륨: Pod 내의 컨테이너들은 공유 볼륨을 마운트할 수 있어, 데이터를 공유하거나 초기화할 때 사용됩니다.
- 환경 변수 & 설정: Pod 스펙을 통해 컨테이너에 전달할 환경 변수, 명령어, 엔트리포인트 등을 정의합니다.

## Pod의 특징

- 일시성(Ephemeral): Pod은 일시적인 단위로 설계되어, 만약 Pod 내의 컨테이너가 장애를 일으키면 새로운 Pod으로 대체됩니다. 이 점은 애플리케이션의 내결함성을 높이는 쿠버네티스의 중요한 설계 철학입니다.
- 공유 리소스: 같은 Pod에 속한 컨테이너들은 네트워크와 스토리지 등 리소스를 공유하기 때문에, 밀접하게 연관된 작업을 수행하는 경우 유리합니다.
- 스케줄링: 쿠버네티스 스케줄러는 Pod을 클러스터 내의 적절한 노드에 배치하며, 리소스 사용량, 노드의 상태 등을 고려하여 배치 결정을 내립니다.

## Pod의 라이프사이클

Pod의 라이프사이클은 여러 단계로 구성됩니다. 주요 단계는 다음과 같습니다.

- Pending: Pod 생성 후, 컨테이너 이미지 다운로드, 초기화 작업 등을 수행하는 단계입니다.
- Running: 컨테이너가 정상적으로 실행 중인 상태이며, 네트워킹 및 스토리지 등 모든 자원이 활성화된 상태입니다.
- Succeeded/Failed: 작업 완료나 오류 발생 시 Pod의 상태가 변경되며, 필요에 따라 재시작 정책에 따라 다시 생성되거나 종료됩니다.

## Pod 사용 시 고려사항

- 디자인 패턴: 하나의 Pod에 여러 컨테이너를 넣어야 하는 경우, 주로 ‘사이드카 패턴’을 적용합니다. 이는 주 애플리케이션과 보조 기능(예: 로깅, 모니터링 등)을 하나의 Pod에 묶어 효율적인 협업을 도모합니다.
- 불변성: Pod은 생성 후 상태를 직접 수정하기보다, 새로운 버전의 Pod을 배포하는 방식으로 업데이트됩니다.
- 리소스 관리: Pod 스펙에서 CPU, 메모리와 같은 자원 제한을 명시하여, 클러스터 전체 리소스의 효율적 사용을 도모해야 합니다.

## 실습 예제

아래는 간단한 Pod YAML 파일 예시입니다.

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: sample-pod
spec:
  containers:
    - name: app-container
      image: nginx:latest
      ports:
        - containerPort: 80
```

이 예제에서는 하나의 컨테이너(Nginx)를 실행하는 Pod을 정의합니다.  
실제 환경에서는 환경 변수 설정, 볼륨 마운트, 리소스 제한 등의 추가 설정을 통해 보다 견고한 서비스를 구성할 수 있습니다.
