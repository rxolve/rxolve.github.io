---
title: "kube-apiserver"
date: "250302"
tags: ["Kubernetes"]
---

## kube-apiserver?

쿠버네티스 아키텍처의 핵심 구성 요소인 kube-apiserver는 클러스터의 “프론트 엔드” 역할을 합니다.

모든 사용자 요청(예: kubectl 명령어, 내부 컴포넌트 간의 통신 등)은 이 API 서버를 통해 처리되며, 클러스터의 상태 변경 및 관리를 담당합니다.

## 주요 역할 및 기능

1. 요청 인증 및 검증

   - 모든 API 요청은 kube-apiserver에서 먼저 인증되고, 유효성 검증을 거칩니다.
   - 이를 통해 올바른 요청만이 클러스터 상태에 반영됩니다.

2. 데이터 처리 및 etcd와의 연동

   - kube-apiserver는 클러스터의 영속 데이터 저장소인 etcd와 직접 통신합니다.
   - 새로운 파드 생성, 업데이트, 삭제와 같은 상태 변경은 모두 etcd에 기록되어 클러스터의 실제 상태를 반영합니다.
   - etcd와의 인터페이스를 담당하는 유일한 컴포넌트이므로, 모든 상태 변경의 “출입구” 역할을 합니다.
     > 참고: "모든 변경사항은 kube-apiserver를 통해 etcd에 기록된다." citeturn0search0

3. 컴포넌트 간 통신

   - 스케줄러(kube-scheduler), 컨트롤러 매니저(kube-controller-manager), kubelet 등 다른 컨트롤 플레인 컴포넌트는 모두 kube-apiserver를 통해 상태 정보를 주고받습니다.
   - 예를 들어, 새로운 파드가 생성되면 스케줄러가 적절한 노드를 선택하고, 해당 정보는 다시 kube-apiserver를 통해 etcd에 기록됩니다.

4. 보안 및 확장성
   - 인증, 인가, 감사(audit) 로그와 같은 보안 기능들이 플러그인 형태로 추가되어 운영 환경에 맞게 확장할 수 있습니다.
   - kube-apiserver는 수평 확장이 가능하므로, 고가용성을 위해 여러 인스턴스로 배포할 수 있습니다.

## 배포 및 구성

1. kubeadm을 통한 배포

   - 일반적으로 kubeadm을 사용하면, kube-apiserver는 `kube-system` 네임스페이스 내의 정적 파드 형태로 배포됩니다.
   - 파드 정의 파일(예: `/etc/kubernetes/manifests/kube-apiserver.yaml`)에서 실행 옵션과 파라미터를 확인할 수 있습니다.
     > 예시: `--etcd-servers` 옵션으로 etcd 서버의 위치를 지정합니다. citeturn0search0

2. 수동 설치
   - 바이너리를 직접 다운로드하여 master 노드에서 systemd 서비스로 실행할 수도 있습니다.
   - 이 경우, 다양한 커맨드라인 옵션을 통해 인증서, 인가, 암호화 옵션 등 세부 설정을 조정할 수 있습니다.

---

## 정리

kube-apiserver는 쿠버네티스 클러스터의 모든 상태 변경과 관리를 담당하는 핵심 “출입구”입니다.

- 인증 및 유효성 검증으로 올바른 요청만이 처리되도록 보장하며,
- etcd와의 직접 통신을 통해 클러스터의 실제 상태를 저장·관리하고,
- 다른 컨트롤 플레인 컴포넌트와의 효율적인 연동을 통해 안정적이고 확장 가능한 클러스터 운영이 가능하도록 합니다.
