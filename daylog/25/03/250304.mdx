---
title: "kube-scheduler "
date: "250304"
tags: ["Kubernetes"]
---

## kube-scheduler

kube-scheduler는 쿠버네티스의 기본 스케줄러로, 클러스터 내에서 아직 어떤 노드에도 배정되지 않은(unscheduled) 파드가 실행될 최적의 노드를 선택하는 역할을 합니다.  
이 컴포넌트는 컨트롤 플레인의 핵심 요소 중 하나이며, 클러스터의 전반적인 상태와 노드의 리소스, 정책, 제약 조건 등을 고려해 파드를 적절한 위치에 배치합니다.

## kube-scheduler의 역할 및 중요성

- 파드 감시: kube-scheduler는 API 서버에서 새로 생성되었거나 아직 노드가 할당되지 않은 파드를 지속적으로 감시합니다.
- 노드 선택: 파드의 리소스 요구사항(예, CPU, 메모리), 하드웨어/소프트웨어 제약, 어피니티/안티-어피니티, 데이터 지역성 등 다양한 요소를 고려하여 실행 가능한(feasible) 노드 집합을 필터링합니다.
- 스코어링 및 순위 결정: 필터링된 후보 노드에 대해 우선순위 함수(priority function)를 적용하여 점수를 산출하고, 가장 높은 점수를 받은 노드를 선택합니다.
- 바인딩: 스케줄러는 선택된 노드를 API 서버에 보고(바인딩)함으로써 해당 파드가 선택된 노드에서 실행되도록 합니다.

## 스케줄링 프로세스: 필터링과 스코어링 단계

kube-scheduler의 동작은 크게 두 단계로 나뉩니다.

1. 필터링 단계 (Filtering):
   - 목적: 파드의 스케줄링 요구사항(예: 리소스 요청, 노드 셀렉터, Taints/Tolerations 등)을 만족하지 않는 노드를 미리 제외합니다.
   - 예시: 파드가 필요한 CPU나 메모리 양을 제공하지 못하는 노드는 후보에서 제거됩니다.
2. 스코어링 단계 (Scoring):
   - 목적: 필터링 후 남은 노드들에 대해 우선순위 함수를 적용하여 각 노드에 점수를 할당하고, 가장 적합한 노드를 선택합니다.
   - 특징: 여러 우선순위 규칙이 적용될 수 있으며, 점수가 동일한 경우 임의로 선택하거나 추가적인 규칙을 적용할 수 있습니다.

이 두 단계는 쿠버네티스 스케줄링의 핵심 메커니즘이며, 사용자 정의 정책이나 스케줄링 플러그인을 통해 커스터마이징이 가능합니다.

## 확장성과 사용자 정의

최근 kube-scheduler는 스케줄링 프레임워크(Scheduling Framework)를 도입하여, 여러 플러그인을 활용한 확장성을 제공합니다.

- 플러그인 단계: `QueueSort`, `Filter`, `Score`, `Reserve`, `Permit`, `Bind`, `PostBind` 등 다양한 단계에 사용자 정의 플러그인을 삽입할 수 있습니다.
- 멀티 스케줄러 구성: 기본 스케줄러 외에도 사용자는 자체 스케줄러를 구성해 특정 워크로드에 대해 특화된 스케줄링 정책을 적용할 수 있습니다.

이를 통해 kube-scheduler는 단순한 필터링과 스코어링 이상의 복잡한 요구 사항을 지원하며, 클러스터 운영에 유연성을 더합니다.

## 정리

쿠버네티스 스케줄러는 어떤 파드를 어느 노드에 배치할지 결정하는 ‘의사결정 엔진’으로, 클러스터의 리소스 효율성을 극대화하고 애플리케이션의 안정적 실행을 보장하는 데 중요한 역할을 합니다.  
kube-scheduler는 실제로 파드를 실행시키지 않고, 배치 결정만 내리며 이후 노드의 kubelet이 파드를 실행하는 역할을 담당합니다.
