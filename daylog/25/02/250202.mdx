---
title: "블로킹 vs 논블로킹"
date: "250202"
tags: ["Concept"]
---

블로킹과 논블로킹은 주어진 작업을 처리하는 동안 다른 작업을 수행할 수 있는지 여부를 결정하는 개념입니다.  
이를 이해하려면 I/O(입출력) 작업을 기준으로 생각해 보면 좋습니다.

## 블로킹 (Blocking)

블로킹 방식에서는 작업이 끝날 때까지 기다려야 함  
즉, 하나의 작업이 완료될 때까지 다음 작업을 진행할 수 없음

#### 예시: 요리사만 있는 레스토랑 주문

- 고객이 음식을 주문하면, 요리사가 그 음식을 다 만들 때까지 다른 주문을 받지 않음
- 음식이 다 완성된 후에야 다음 고객의 주문을 받을 수 있음

#### 코드 예제 (동기 블로킹)

```typescript
import * as fs from "fs";

// 파일 읽기 (블로킹 방식)
const data = fs.readFileSync("file.txt", "utf-8");
console.log(data); // 파일이 다 읽힌 후 출력됨

console.log("다음 작업 실행"); // 위 작업이 끝난 후 실행됨
```

- `fs.readFileSync()`는 파일을 읽을 때까지 프로그램이 멈춰 있음
- 파일을 다 읽고 나서야 다음 코드가 실행됨

## 논블로킹 (Non-blocking)

논블로킹 방식에서는 작업을 요청한 후 결과를 기다리지 않고 다른 작업을 진행할 수 있음  
즉, 한 작업이 완료될 때까지 기다릴 필요 없이 다른 작업을 수행함

#### 예시: 웨이터가 있는 레스토랑 주문

- 고객이 음식을 주문하면, 요리사는 요리를 시작하고 다음 고객의 주문을 받음
- 요리가 끝나면 웨이터가 고객에게 음식이 나왔다고 알림

### 코드 예제 (비동기 논블로킹)

```typescript
import * as fs from "fs";

// 파일 읽기 (논블로킹 방식)
fs.readFile("file.txt", "utf-8", (err, data) => {
  if (err) throw err;
  console.log(data); // 파일을 다 읽으면 실행됨
});

console.log("다음 작업 실행"); // 파일을 다 읽기 전에 실행됨
```

- `fs.readFile()`은 파일을 읽는 동안 프로그램이 멈추지 않음
- 파일을 읽는 동안 다음 코드(`console.log('다음 작업 실행')`)가 실행됨
- 파일을 다 읽으면 콜백 함수가 실행됨

## 정리

|           | 블로킹 (Blocking)                            | 논블로킹 (Non-blocking)                         |
| --------- | -------------------------------------------- | ----------------------------------------------- |
| 특징      | 작업이 끝날 때까지 기다림                    | 기다리지 않고 다른 작업 수행 가능               |
| 장점      | 구현이 직관적이고 단순함                     | 성능이 뛰어나고 대량의 요청 처리 가능           |
| 단점      | 성능 저하, 다수의 요청 처리 어려움           | 코드가 복잡해질 수 있음 (콜백, Promise 등 필요) |
| 사용 예시 | 파일 읽기(`readFileSync`), 데이터베이스 쿼리 | 이벤트 루프 기반 작업 (`readFile`, API 요청)    |
