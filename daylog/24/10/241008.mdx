---
title: "격리 수준"
date: "241008"
tags: ["RDS"]
---

트랜잭션의 격리 수준(Isolation Level)은 여러 트랜잭션이 동시에 실행될 때 서로 간섭하지 않도록 격리하는 정도를 결정하는 설정입니다.

데이터베이스에서는 여러 트랜잭션이 동시에 실행되더라도 일관된 상태를 유지해야 하며, 트랜잭션 격리 수준은 동시성과 성능의 균형을 잡는 중요한 요소입니다.

격리 수준은 동시성 문제를 얼마나 허용할지에 따라 네 가지로 나뉩니다:

#### Read Uncommitted (읽기 미완료 허용)

- 설명: 한 트랜잭션이 커밋되지 않은 데이터를 다른 트랜잭션이 읽을 수 있습니다. 즉, 아직 완료되지 않은 트랜잭션의 중간 상태를 다른 트랜잭션이 볼 수 있습니다.
- 문제점: 더티 리드(Dirty Read)가 발생할 수 있습니다. 커밋되지 않은 데이터가 나중에 롤백되면, 이미 그 데이터를 읽은 트랜잭션은 잘못된 정보를 읽게 되는 상황입니다.
- 장점: 가장 낮은 격리 수준이기 때문에 성능이 좋지만 데이터 일관성을 희생합니다.
- 동시성 문제 허용: Dirty Read, Non-repeatable Read, Phantom Read

#### Read Committed (읽기 완료 허용)

- 설명: 커밋이 완료된 데이터만 다른 트랜잭션에서 읽을 수 있습니다. 트랜잭션 중간에 변경한 내용은 커밋되지 않는 한 다른 트랜잭션이 접근할 수 없습니다.
- 문제점: 비반복 읽기(Non-repeatable Read)가 발생할 수 있습니다. 한 트랜잭션이 데이터를 읽은 후, 다른 트랜잭션이 그 데이터를 수정하거나 삭제하면 첫 번째 트랜잭션이 다시 조회할 때 결과가 달라질 수 있습니다.
- 장점: 대부분의 DBMS에서 기본적으로 설정된 격리 수준으로, 적절한 성능과 일관성을 제공합니다.
- 동시성 문제 허용: Non-repeatable Read, Phantom Read

#### Repeatable Read (반복 읽기 허용)

- 설명: 트랜잭션 동안 동일한 데이터를 여러 번 읽어도 항상 같은 결과가 반환됩니다. 다른 트랜잭션이 데이터 값을 수정하거나 삭제해도 첫 번째 트랜잭션이 완료되기 전까지는 영향을 받지 않습니다.
- 문제점: 팬텀 읽기(Phantom Read)가 발생할 수 있습니다. 트랜잭션이 범위를 지정해 데이터를 조회했을 때, 다른 트랜잭션이 그 범위 내에 새로운 데이터를 삽입하면 첫 번째 트랜잭션이 다시 조회할 때 결과에 새로운 데이터가 포함될 수 있습니다.
- 장점: 트랜잭션 내에서 일관된 데이터를 읽을 수 있지만 성능에 다소 영향을 미칩니다.
- 동시성 문제 허용: Phantom Read

#### Serializable (직렬화 가능)

- 설명: 가장 높은 격리 수준으로, 트랜잭션이 직렬화된 것처럼 동작합니다. 트랜잭션들이 동시에 실행되지만 서로 완벽하게 격리되어, 충돌이 발생하지 않도록 보장됩니다.
- 문제점: 동시 실행 성능이 크게 떨어질 수 있습니다. 트랜잭션 간의 충돌 가능성이 높아져서 락 경쟁이 발생할 수 있으며, 그로 인해 직렬화 실패로 인해 일부 트랜잭션이 롤백될 수 있습니다.
- 장점: 완벽한 데이터 일관성을 보장하지만, 성능 비용이 매우 큽니다.
- 동시성 문제 허용: 없음

### 각 격리 수준에서 발생할 수 있는 동시성 문제

| 격리 수준        | Dirty Read | Non-repeatable Read | Phantom Read |
| ---------------- | ---------- | ------------------- | ------------ |
| Read Uncommitted | 가능       | 가능                | 가능         |
| Read Committed   | 불가능     | 가능                | 가능         |
| Repeatable Read  | 불가능     | 불가능              | 가능         |
| Serializable     | 불가능     | 불가능              | 불가능       |

### 정리

- 격리 수준을 낮추면 동시성이 높아져 성능이 좋아지지만, 데이터 일관성 문제가 발생할 수 있습니다.
- 격리 수준을 높이면 데이터 일관성은 보장되지만, 동시성 저하로 인해 성능에 영향을 미칠 수 있습니다.
- 데이터 일관성이 중요한 경우에는 높은 격리 수준(Serializable)이 유리하지만, 일반적인 시스템에서는 Read Committed나 Repeatable Read를 많이 사용합니다.

트랜잭션의 격리 수준을 적절히 설정하는 것이 성능 최적화와 데이터 일관성 사이의 균형을 맞추는 핵심입니다.
