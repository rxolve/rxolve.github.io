---
title: "2-3-4 트리"
date: "240922"
tags: ["Algorithm"]
---

이전에 2-3 트리에 대해 알아보았습니다.

이번에는 그 개념을 확장한 2-3-4 트리에 대해 살펴보겠습니다.

#### 2-3-4 트리란?

2-3-4 트리는 2-3 트리의 개념을 확장한 자료구조로, 각 노드가 최대 3개의 데이터 요소와 4개의 자식을 가질 수 있는 균형 탐색 트리입니다.

#### 2-3-4 트리의 특징

- 모든 리프 노드는 같은 깊이에 있습니다.
- 내부 노드는 2, 3, 또는 4개의 자식을 가질 수 있습니다.
- 2-노드는 1개의 데이터와 2개의 자식을 가집니다.
- 3-노드는 2개의 데이터와 3개의 자식을 가집니다.
- 4-노드는 3개의 데이터와 4개의 자식을 가집니다.
- 모든 데이터는 정렬된 순서로 유지됩니다.

#### 2-3-4 트리 삽입 과정

2-3-4 트리에 새로운 값을 삽입하는 과정은 2-3 트리와 유사하지만, 4-노드를 처리하는 단계가 추가됩니다.

1. 삽입 위치 찾기

   - 루트에서 시작하여 적절한 리프 노드를 찾을 때까지 트리를 탐색합니다.

2. 리프 노드에 키 삽입

   - 찾은 리프 노드에 새 값을 삽입합니다.

3. 노드 분할 (필요한 경우)

   - 삽입 후 노드가 4-노드가 되면, 분할이 필요합니다.
   - 중간 값을 부모 노드로 올리고, 나머지 두 값으로 새 노드를 만듭니다.

4. 부모 노드 처리

   - 부모 노드도 4-노드가 되면, 같은 과정을 반복합니다.

5. 루트 노드 처리
   - 루트가 4-노드가 되면, 새로운 루트를 생성하여 트리의 높이를 증가시킵니다.

#### 삽입 예시

2-3-4 트리에 숫자를 순서대로 삽입하는 과정을 단계별로 살펴보겠습니다.

10, 20, 30, 40, 50, 60을 차례로 삽입해 보겠습니다.

1. 10 삽입:

   ```
   [10]
   ```

2. 20 삽입:

   ```
   [10 | 20]
   ```

3. 30 삽입:

   ```
   [10 | 20 | 30]
   ```

4. 40 삽입:

   - 루트 노드가 꽉 찼으므로 분할이 필요합니다.
   - 중간값 20을 새 루트로 올리고, 10과 30,40으로 자식 노드를 만듭니다.

   ```
        [20]
       /    \
    [10]   [30 | 40]
   ```

5. 50 삽입:

   ```
        [20]
       /    \
    [10]   [30 | 40 | 50]
   ```

6. 60 삽입:
   - [30 | 40 | 50] 노드가 꽉 찼으므로 분할이 필요합니다.
   - 40을 부모 노드로 올리고, 30과 50,60으로 새 노드를 만듭니다.
   ```
        [20 | 40]
       /    |    \
    [10]  [30]  [50 | 60]
   ```

이 예제를 통해 2-3-4 트리의 주요 특성을 확인할 수 있습니다.

- 모든 리프 노드가 같은 레벨에 있습니다.
- 내부 노드는 2, 3, 또는 4개의 자식을 가질 수 있습니다.
- 트리가 자동으로 균형을 유지합니다.

#### 시각화

이 다이어그램은 2-3-4 트리에 새로운 키를 삽입하는 전체 과정을 보여줍니다.

<Mermaid
  chart={`
graph TD
    A[시작] --> B{트리가 비어있는가?}
    B -->|Yes| C[새 노드 생성]
    B -->|No| D[리프 노드까지 탐색]
    D --> E{노드가 꽉 찼는가?}
    E -->|No| F[키 삽입]
    E -->|Yes| G[노드 분할]
    G --> H{부모 노드가 있는가?}
    H -->|Yes| I[부모 노드에 중간 키 삽입]
    H -->|No| J[새 루트 노드 생성]
    I --> K[포인터 업데이트]
    J --> K
    K --> L[종료]
    F --> L
   `}
/>

#### 2-3-4 트리와 레드-블랙 트리의 관계

2-3-4 트리는 레드-블랙 트리와 밀접한 관계가 있습니다.

사실상 레드-블랙 트리는 2-3-4 트리를 이진 트리 형태로 표현한 것으로 볼 수 있습니다.

- 2-노드는 검은색 노드로 표현됩니다.
- 3-노드는 검은색 부모와 빨간색 자식으로 표현됩니다.
- 4-노드는 검은색 부모와 두 개의 빨간색 자식으로 표현됩니다.

이러한 관계 때문에 2-3-4 트리를 이해하면 레드-블랙 트리의 동작 원리를 더 쉽게 이해할 수 있습니다.

#### 성능

2-3-4 트리는 모든 연산(검색, 삽입, 삭제)에 대해 O(log n)의 시간 복잡도를 가집니다.

#### 마치며

2-3-4 트리는 2-3 트리의 개념을 확장하여 더 많은 데이터를 효율적으로 저장하고 처리할 수 있게 합니다.

이 자료구조는 데이터베이스 시스템이나 파일 시스템에서 자주 사용되며, 레드-블랙 트리의 기반이 되는 중요한 개념입니다.
