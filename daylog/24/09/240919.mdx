---
title: "PostgreSQL도 JSONB를 지원하는데 왜 MongoDB를 쓸까?"
date: "240919"
tags: ["RDS"]
---

MySQL만을 사용하다 지금 회사에서 PostgreSQL을 사용하면서 만족하고 있습니다.

관계형 데이터베이스의 안정성과 유연성을 경험한 개발자라면, 아마도 이런 생각을 한 번쯤 해봤을 겁니다.

PostgreSQL에서 JSONB로 JSON 데이터를 충분히 잘 다룰 수 있는데, 굳이 MongoDB를 써야 할 이유가 있을까?

특히, 복잡한 데이터를 처리하는 프로젝트에서는 더 그렇습니다.

오늘은 PostgreSQL과 MongoDB의 장단점을 간단히 알아보며, 왜 MongoDB가 특정 상황에서 더 적합한 선택이 될 수 있는지 살펴봤습니다.

#### PostgreSQL의 JSONB는 정말 충분할까?

먼저 복잡한 문서 관리가 문제입니다. 중첩된 구조가 복잡해질수록, JSON 데이터를 처리하는 쿼리의 복잡성도 증가합니다.

이는 조인과 복잡한 연산이 결합되면 더 큰 성능 저하를 일으킬 수 있습니다.

또 PostgreSQL은 기본적으로 수직 확장에 더 적합합니다.

물론, 최근에는 수평 확장을 지원하기 위한 다양한 옵션이 등장했지만, 본질적으로 MongoDB만큼 샤딩에 최적화되어 있지는 않습니다.

이와 마찬가지로 PostgreSQL은 여전히 테이블과 열 중심의 관계형 모델에 뿌리를 두고 있습니다.

JSONB는 비정형 데이터를 처리할 수 있지만, MongoDB처럼 기본 데이터 모델로서 설계된 것은 아닙니다.

이러한 한계는 완전한 비정형 데이터만을 다루거나, 수평 확장이 절대적으로 필요한 환경에서는 MongoDB의 선택을 재고하게 만듭니다.

#### MongoDB가 필요한 순간

데이터 구조의 잦은 변화가 있을 때 MongoDB의 스키마리스 구조는 매우 유용합니다.

데이터 모델이 자주 바뀌더라도, MongoDB에서는 스키마 변경 작업 없이 바로 새로운 구조로 데이터를 저장할 수 있습니다.

또한 MongoDB는 태생적으로 수평 확장을 염두에 두고 설계되었습니다.

샤딩을 통해 데이터를 여러 서버에 분산 저장할 수 있어, 데이터 규모가 커질 때에도 성능 저하 없이 확장이 가능합니다.

특히 대용량 데이터를 처리하는 스타트업이나 엔터프라이즈 시스템에서 유리합니다.

그리고 중첩된 문서 구조를 자연스럽게 처리합니다.

예를 들어, 하나의 컬렉션에 계층적이고 복잡한 데이터를 저장할 수 있으며, 이런 데이터를 쉽게 검색하고 업데이트할 수 있는 쿼리 메커니즘을 제공합니다.

이런 구조는 소셜 미디어, IoT, 로그 데이터와 같이 다양한 형태의 데이터를 다루는 서비스에서 유용합니다.

#### MongoDB vs PostgreSQL

언젠가 대규모 데이터를 처리하는 스타트업의 CTO와의 대화에서, MongoDB로 서비스를 운영하는 것이 더 편리하다고 들은 적이 있습니다.

스타트업에서는 개발 속도가 가장 중요합니다.

서비스가 초반에는 간단한 사용자 정보를 저장하다가, 나중에는 복잡한 결제 정보, 주문 내역 등을 저장해야 할 수 있습니다.

이런 상황에서 데이터 모델이 자주 바뀔 가능성이 큽니다.

MongoDB는 스키마를 미리 정의할 필요가 없기 때문에 이러한 변화에 훨씬 더 유연하게 대처할 수 있습니다.

또한 스타트업은 빠른 성장을 목표로 하기 때문에, 데이터의 양이 급격하게 늘어날 수 있습니다.

MongoDB의 샤딩 기능을 통해 이러한 급격한 데이터 확장에 유연하게 대응할 수 있습니다.

그렇다면 PostgreSQL은 언제 선택해야 할까요?

사실 PostgreSQL은 RDS의 강점과 더불어 JSONB 덕분에 비정형 데이터 처리에도 상당한 성능을 발휘합니다.

그렇기에 사용자, 상품, 주문과 같은 정형 데이터를 다루는 경우 PostgreSQL은 여전히 최고의 선택입니다.

정규화된 데이터를 안정적으로 관리하면서, 필요할 때 비정형 데이터까지 처리할 수 있습니다.

금융, 물류, ERP 시스템처럼 데이터의 무결성과 일관성이 중요한 시스템에서는 PostgreSQL의 ACID 트랜잭션 처리 기능이 필수적입니다.

간단히 말해 스타트업에서는 MongoDB, 대기업에서는 PostgreSQL을 선택하는 것이 경향으로 보입니다.

#### 정리하며

결국 데이터베이스 선택은 서비스의 요구사항과 데이터 모델에 달려 있습니다.

다음과 같은 기준으로 선택을 고민해볼 수 있습니다.

- PostgreSQL을 선택할 때

  - 관계형 데이터와 비정형 데이터를 동시에 다뤄야 할 때
  - 트랜잭션 무결성이 중요한 애플리케이션
  - 복잡한 SQL 쿼리와 조인이 필수적일 때
  - 데이터의 규모가 상대적으로 작고, 수직 확장으로도 충분할 때

- MongoDB를 선택할 때
  - 스키마가 유동적이고, 데이터 구조가 자주 변경될 때
  - 대용량 데이터를 분산 처리해야 하며, 수평 확장성이 중요한 경우
  - 계층적이고 중첩된 데이터 구조를 자연스럽게 다뤄야 할 때
  - 비정형 데이터 처리 및 빠른 개발 속도가 필요한 스타트업 환경
