---
title: "NestJS에서 DDD: 도메인이란?"
date: "240820"
tags: ["NestJS"]
---

## 도메인 주도 설계(DDD)란?

예전부터 Node.js를 사용하여 백엔드 애플리케이션을 개발할 때, 많은 개발자들이 유지보수성과 확장성을 고민하게 됩니다.

그때 NestJS가 등장했고 도메인 주도 설계(Domain-Driven Design)를 쉽게 적용할 수 있게 되었습니다.

DDD는 소프트웨어를 개발할 때, 소프트웨어가 다루고자 하는 비즈니스 도메인에 집중하는 설계 기법입니다.

다시 말해, 개발자와 비즈니스 전문가가 협력하여 비즈니스 문제를 정의하고, 그 문제를 해결하기 위해 소프트웨어를 설계하는 방법입니다.

## 도메인이란?

먼저, 도메인이 무엇인지 이해해야 합니다.

도메인은 소프트웨어가 해결하려고 하는 **비즈니스 영역**을 의미합니다.

예를 들어, 쇼핑몰을 개발하고 있다면, "상품 관리"나 "주문 관리"가 도메인이 됩니다.

여기에는 상품 정보, 주문 정보, 장바구니, 결제 등 다양한 하위 도메인이 포함될 수 있습니다.

도메인은 크게 세 가지로 나눌 수 있습니다.

- 핵심 도메인(Core Domain)

  - 비즈니스에서 가장 중요한 부분입니다.
  - 쇼핑몰에서는 상품 관리가 핵심 도메인이 될 수 있습니다.

- 지원 도메인(Supporting Domain)

  - 핵심 도메인을 지원하는 기능입니다.
  - 상품 관리를 지원하는 재고 관리가 여기에 해당할 수 있습니다.

- 일반 도메인(Generic Domain)
  - 비즈니스의 고유한 요소가 아닌, 여러 비즈니스에 공통으로 사용되는 기능입니다.
  - 인증/인가 시스템이 여기에 해당할 수 있습니다.

## 도메인 주도 설계의 주요 개념

DDD는 다음과 같은 주요 개념들을 포함합니다.

- 도메인 모델

  - 도메인 모델은 비즈니스 도메인의 구조와 동작을 표현하는 소프트웨어 모델입니다.
  - 아래의 개념들로 구성됩니다.
    - 엔티티(Entity)
    - 밸류(Value Object)
    - 애그리거트(Aggregate)
    - 리포지토리(Repository)

- 유비쿼터스 언어

  - 개발자와 비즈니스 전문가가 동일한 언어로 소통할 수 있도록 정의된 언어입니다.
  - 모든 팀원이 동일한 용어를 사용함으로써 커뮤니케이션 오류를 줄일 수 있습니다.

- 바운디드 컨텍스트
  - 도메인을 논리적으로 분리한 경계를 의미합니다.
  - 각 바운디드 컨텍스트 내에서 유비쿼터스 언어와 도메인 모델이 독립적으로 유지됩니다.
  - 쇼핑몰의 상품 관리와 주문 관리는 서로 다른 바운디드 컨텍스트가 될 수 있습니다.

## DDD를 NestJS에 적용하기

NestJS에서 DDD를 적용하려면, 다음과 같은 구조로 프로젝트를 설계할 수 있습니다.

이는 NestJS의 모듈 시스템을 사용하여 일반적으로 프로젝트를 구성하는 방법과 유사합니다.

- 모듈
  - NestJS의 모듈 시스템을 사용하여 바운디드 컨텍스트를 표현합니다.
  - 각 모듈은 특정 도메인 또는 하위 도메인에 대응됩니다.
- 서비스
  - 도메인 로직을 구현하는 곳입니다.
  - 도메인 모델을 조작하고 비즈니스 규칙을 적용합니다.
- 엔티티 및 밸류
  - 엔티티는 식별 가능한 개체를 표현하며, 밸류는 엔티티의 속성을 표현합니다.
  - 이들은 도메인 모델의 핵심 구성 요소입니다.
- 리포지토리
  - 데이터베이스 접근 로직을 캡슐화하며, 도메인 모델과 데이터 저장소 사이의 인터페이스 역할을 합니다.
  - 필요한 쿼리를 리포지토리에 정의하고, 서비스에서 호출하여 사용합니다.

## 마치며

도메인에 대한 깊은 이해를 바탕으로 소프트웨어를 설계하면, 비즈니스 요구사항 변화에 유연하게 대응할 수 있습니다.

앞으로 천천히 DDD에 대해 공부하고, 실무에서 더 잘 적용해 볼 생각입니다.
